# vitepress自动生成左侧边栏

## 依赖

```bash
pnpm add @types/node
```

## 配置

`config.mts`

```js
import { defineConfig } from 'vitepress'
import { readdirSync } from 'node:fs'
import { resolve } from 'node:path'

// 自动生成侧边栏
function getSidebar(dir: string): { text: string; link: string }[] {
  const fullPath = resolve(process.cwd(), 'docs', dir)

  let files: string[] = []
  try {
    files = readdirSync(fullPath)
  } catch (err) {
    console.warn(`目录不存在: ${fullPath}`)
    return []
  }

  return files
    .filter(file => file.endsWith('.md') && file !== 'index.md')
    .sort() // 按文件名排序
    .map(file => ({
      text: file.replace('.md', ''),
      link: `/${dir}/${file.replace('.md', '')}`
    }))
}

export default defineConfig({
  base: '/vitepress-docs/',
  lang: 'zh-CN',
  ignoreDeadLinks: true,
  title: "木子空间",
  description: "A VitePress Site",
  themeConfig: {
    siteTitle: "木子空间",
    logo: 'http://cdn.qiniu.liyansheng.top/img/graphic-4005286_640.png',
    footer: {
      copyright: 'Copyright © 2019-present 木子空间'
    },
    search: { provider: 'local' },

    nav: [
      {
        text: '前端',
        items: [
          { text: 'Js', link: '/Js/' },
          { text: 'uniapp', link: '/uniapp/' }
        ]
      },

    ],

    // 自动生成侧边栏
    sidebar: {
      '/Js/': [
        { text: 'Js 系列', items: getSidebar('Js') }
      ],
      '/uniapp/': [
        { text: 'uniapp 系列', items: getSidebar('uniapp') }
      ],
```

