import{_ as i,c as a,o as n,aj as l}from"./chunks/framework.VtnL2jmu.js";const o=JSON.parse('{"title":"é¡¹ç›®ä»npmåˆ°pnpm","description":"","frontmatter":{},"headers":[],"relativePath":"vue/é¡¹ç›®ä»npmåˆ°pnpm.md","filePath":"vue/é¡¹ç›®ä»npmåˆ°pnpm.md"}'),p={name:"vue/é¡¹ç›®ä»npmåˆ°pnpm.md"};function t(e,s,h,k,r,d){return n(),a("div",null,[...s[0]||(s[0]=[l(`<h1 id="é¡¹ç›®ä»npmåˆ°pnpm" tabindex="-1">é¡¹ç›®ä»npmåˆ°pnpm <a class="header-anchor" href="#é¡¹ç›®ä»npmåˆ°pnpm" aria-label="Permalink to â€œé¡¹ç›®ä»npmåˆ°pnpmâ€">â€‹</a></h1><blockquote><p>Vite + Vue 3 é¡¹ç›®ä» npm åˆ‡æ¢åˆ° pnpm æ˜¯éå¸¸å¸¸è§ä¸”æ¨èçš„åšæ³•ã€‚pnpm é€Ÿåº¦æ›´å¿«ã€ç£ç›˜ç©ºé—´å ç”¨æ›´å°‘ï¼ˆé€šè¿‡ç¡¬é“¾æ¥å…±äº« node_modulesï¼‰ï¼Œå°¤å…¶é€‚åˆä¸­å¤§å‹é¡¹ç›®ã€‚</p></blockquote><h3 id="åˆ‡æ¢æ­¥éª¤-è¶…çº§ç®€å•-åŸºæœ¬æ— é£é™©" tabindex="-1">åˆ‡æ¢æ­¥éª¤ï¼ˆè¶…çº§ç®€å•ï¼ŒåŸºæœ¬æ— é£é™©ï¼‰ <a class="header-anchor" href="#åˆ‡æ¢æ­¥éª¤-è¶…çº§ç®€å•-åŸºæœ¬æ— é£é™©" aria-label="Permalink to â€œåˆ‡æ¢æ­¥éª¤ï¼ˆè¶…çº§ç®€å•ï¼ŒåŸºæœ¬æ— é£é™©ï¼‰â€">â€‹</a></h3><ol><li><p><strong>åˆ é™¤æ—§çš„é”æ–‡ä»¶å’Œ node_modules</strong></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node_modules</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> package-lock.json</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # npm çš„é”æ–‡ä»¶ï¼Œå¿…é¡»åˆ </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¦‚æœæœ‰ yarn.lock ä¹Ÿåˆ æ‰ï¼ˆè™½ç„¶ä½ ç”¨çš„æ˜¯ npmï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yarn.lock</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> 2&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/dev/null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span></code></pre></div></li><li><p><strong>å®‰è£… pnpmï¼ˆå¦‚æœä½ è¿˜æ²¡è£…ï¼‰</strong></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ¨èæ–¹å¼ï¼ˆå®˜æ–¹æ¨èï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pnpm</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æˆ–è€…ç”¨ corepackï¼ˆNode.js 16.13+ è‡ªå¸¦ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">corepack</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">corepack</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prepare</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pnpm@latest</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --activate</span></span></code></pre></div></li><li><p><strong>ç”¨ pnpm é‡æ–°å®‰è£…ä¾èµ–</strong></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><p>ç¬¬ä¸€æ¬¡æ‰§è¡Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸¤ä¸ªæ–°æ–‡ä»¶ï¼š</p><ul><li><code>pnpm-lock.yaml</code>ï¼ˆpnpm çš„é”æ–‡ä»¶ï¼Œä»¥åè¦æäº¤åˆ° gitï¼‰</li><li><code>pnpm-workspace.yaml</code>ï¼ˆå¦‚æœæœ‰ monorepo æ‰ä¼šç”Ÿæˆï¼Œå•é¡¹ç›®ä¸€èˆ¬æ²¡æœ‰ï¼‰</li></ul></li><li><p><strong>ä¿®æ”¹ package.json ä¸­çš„è„šæœ¬ï¼ˆæ¨èï¼Œä½†ä¸æ˜¯å¿…é¡»ï¼‰</strong> pnpm æ”¯æŒç›´æ¥ç”¨ <code>pnpm dev</code>ã€<code>pnpm build</code> ç­‰ä»£æ›¿ <code>pnpm run xxx</code>ï¼Œä½†ä¸ºäº†ä¿æŒå’ŒåŸæ¥ä¸€è‡´ï¼Œå»ºè®®æŠŠ scripts æ”¹æˆæ”¯æŒä¸¤è€…ï¼š</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;dev&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vite&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vite build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;preview&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vite preview&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>è¿™æ ·ä½ æ—¢å¯ä»¥ç”¨ <code>npm run dev</code>ï¼ˆå…¶å®è°ƒç”¨ pnpmï¼‰ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ <code>pnpm dev</code>ï¼Œéƒ½å¾ˆæ–¹ä¾¿ã€‚</p></li><li><p><strong>æäº¤åˆ° gitï¼ˆé‡è¦ï¼ï¼‰</strong></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pnpm-lock.yaml</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> package-lock.json</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¦‚æœä½ æƒ³å¼ºåˆ¶å›¢é˜Ÿéƒ½ç”¨ pnpmï¼Œå¯ä»¥åŠ  .npmrc æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;lockfile: true&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .npmrc</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;node-linker=hoisted&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .npmrc</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # å¯é€‰ï¼šè®© node_modules ç»“æ„æ›´æ¥è¿‘ npmï¼Œä¾¿äºä¸€äº›å·¥å…·å…¼å®¹</span></span></code></pre></div></li></ol><h3 id="å›¢é˜Ÿåä½œæ³¨æ„äº‹é¡¹" tabindex="-1">å›¢é˜Ÿåä½œæ³¨æ„äº‹é¡¹ <a class="header-anchor" href="#å›¢é˜Ÿåä½œæ³¨æ„äº‹é¡¹" aria-label="Permalink to â€œå›¢é˜Ÿåä½œæ³¨æ„äº‹é¡¹â€">â€‹</a></h3><ul><li>å‘Šè¯‰å›¢é˜Ÿæˆå‘˜ä¹Ÿåˆ‡æ¢åˆ° pnpmï¼Œæˆ–è€…è‡³å°‘è®©ä»–ä»¬åˆ æ‰ package-lock.jsonï¼Œåªä¿ç•™ pnpm-lock.yamlã€‚</li><li>å¦‚æœæœ‰äººè¿˜æ˜¯ç”¨ npm installï¼Œä¼šé‡æ–°ç”Ÿæˆ package-lock.jsonï¼Œå®¹æ˜“é€ æˆé”æ–‡ä»¶å†²çªã€‚è§£å†³åŠæ³•ï¼š <ul><li>åœ¨é¡¹ç›®æ ¹ç›®å½•åŠ ä¸€ä¸ª <code>.npmrc</code> æ–‡ä»¶ï¼š<div class="language-ini"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package-lock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=false</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">lockfile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=false</span></span></code></pre></div>è¿™æ ·å³ä½¿æœ‰äººç”¨ npm å®‰è£…ï¼Œä¹Ÿä¸ä¼šç”Ÿæˆ package-lock.jsonã€‚</li></ul></li></ul><h3 id="åˆ‡æ¢åä½ ä¼šç«‹åˆ»æ„Ÿå—åˆ°çš„å¥½å¤„" tabindex="-1">åˆ‡æ¢åä½ ä¼šç«‹åˆ»æ„Ÿå—åˆ°çš„å¥½å¤„ <a class="header-anchor" href="#åˆ‡æ¢åä½ ä¼šç«‹åˆ»æ„Ÿå—åˆ°çš„å¥½å¤„" aria-label="Permalink to â€œåˆ‡æ¢åä½ ä¼šç«‹åˆ»æ„Ÿå—åˆ°çš„å¥½å¤„â€">â€‹</a></h3><ul><li><code>pnpm install</code> é€šå¸¸æ¯” npm å¿« 2-5 å€</li><li>å¤šä¸ªé¡¹ç›®å…±äº«åŒä¸€ä¸ªä¾èµ–å­˜å‚¨ï¼ˆå…¨å±€ storeï¼‰ï¼Œç£ç›˜ç©ºé—´å¤§å¹…èŠ‚çœ</li><li>æ›´ä¸¥æ ¼çš„ä¾èµ–è§£æï¼Œé¿å… phantom dependenciesï¼ˆå¹»å½±ä¾èµ–ï¼‰</li></ul><h3 id="æ€»ç»“-ä¸€å¥è¯æ“ä½œ" tabindex="-1">æ€»ç»“ï¼šä¸€å¥è¯æ“ä½œ <a class="header-anchor" href="#æ€»ç»“-ä¸€å¥è¯æ“ä½œ" aria-label="Permalink to â€œæ€»ç»“ï¼šä¸€å¥è¯æ“ä½œâ€">â€‹</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node_modules</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> package-lock.json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><hr><p>ğŸ“Œå¯èƒ½é‡åˆ°é—®é¢˜ï¼š</p><p>ä¸‹è½½æ…¢ï¼Ÿ</p><blockquote><p>æ¢é•œåƒï¼ˆæ¨èï¼‰ï¼šç”¨æ·˜å®é•œæˆ–è…¾è®¯é•œåŠ é€Ÿã€‚</p></blockquote><p>åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ .npmrc æ–‡ä»¶é‡ŒåŠ ï¼š</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">registry</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">https://registry.npmmirror.com/</span></span></code></pre></div><p>æˆ–è€…ä¸´æ—¶å‘½ä»¤ï¼š<code>pnpm install --registry https://registry.npmmirror.com</code></p><p>å¦‚æœä¸æƒ³çœ‹è­¦å‘Šï¼Œå¯ä»¥è°ƒé«˜é˜ˆå€¼ï¼ˆåœ¨ .npmrc åŠ ï¼‰ï¼š</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">textfetch-min-speed-kibps</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">10</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # æŠŠæœ€ä½é€Ÿåº¦è°ƒä½</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fetch-warn-timeout-ms</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">30000</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # æŠŠè¶…æ—¶è­¦å‘Šè°ƒåˆ°30ç§’</span></span></code></pre></div>`,19)])])}const c=i(p,[["render",t]]);export{o as __pageData,c as default};
