import{_ as i,c as a,o as h,aj as k}from"./chunks/framework.VtnL2jmu.js";const g=JSON.parse('{"title":"多个方式启动服务","description":"","frontmatter":{},"headers":[],"relativePath":"kafka/容器启动.md","filePath":"kafka/容器启动.md"}'),n={name:"kafka/容器启动.md"};function l(t,s,e,p,r,F){return h(),a("div",null,[...s[0]||(s[0]=[k(`<h1 id="多个方式启动服务" tabindex="-1">多个方式启动服务 <a class="header-anchor" href="#多个方式启动服务" aria-label="Permalink to “多个方式启动服务”">​</a></h1><blockquote><p>每次用到kafka时都会出现各种奇怪的问题，综合实践，下面汇总下主要操作步骤：</p></blockquote><h2 id="docker镜像形式启动" tabindex="-1">Docker镜像形式启动 <a class="header-anchor" href="#docker镜像形式启动" aria-label="Permalink to “Docker镜像形式启动”">​</a></h2><h3 id="zookeeper启动" tabindex="-1">zookeeper启动 <a class="header-anchor" href="#zookeeper启动" aria-label="Permalink to “zookeeper启动”">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zookeeper</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2181:2181</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> wurstmeister/zookeeper</span></span></code></pre></div><h3 id="kafka启动" tabindex="-1">kafka启动 <a class="header-anchor" href="#kafka启动" aria-label="Permalink to “kafka启动”">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kafka01</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 9092:9092</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> KAFKA_BROKER_ID=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> KAFKA_ZOOKEEPER_CONNECT=150.158.16.123:12348</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://150.158.16.123:9092</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> KAFKA_LISTENERS=PLAINTEXT://0.0.0.0:9092</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  wurstmeister/kafka</span></span></code></pre></div><h3 id="进入kafka容器" tabindex="-1">进入kafka容器 <a class="header-anchor" href="#进入kafka容器" aria-label="Permalink to “进入kafka容器”">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -it</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [容器id] /bin/bash</span></span></code></pre></div><p>创建topic</p><p>进入容器，在<code>/opt/kafka_2.13-2.8.1/bin</code> 目录下创建topic</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./kafka-topics.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --create</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --zookeeper</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 150.158.16.123:12348</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --replication-factor</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --partitions</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --topic</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mykafka</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./kafka-topics.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --create</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --zookeeper</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 150.158.16.123:2181</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --replication-factor</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --partitions</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --topic</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mykafka</span></span></code></pre></div><p>运行生产者</p><p><img src="http://cdn.qiniu.liyansheng.top/typora/image-20220923112024973.png" alt="image-20220923112024973"></p><p>运行消费者</p><p><img src="http://cdn.qiniu.liyansheng.top/typora/image-20220923112035890.png" alt="image-20220923112035890"></p><hr><h2 id="单机形式启动" tabindex="-1">单机形式启动 <a class="header-anchor" href="#单机形式启动" aria-label="Permalink to “单机形式启动”">​</a></h2><h3 id="前提" tabindex="-1">前提 <a class="header-anchor" href="#前提" aria-label="Permalink to “前提”">​</a></h3><p>1、Linux 机器</p><p>2、环境已准备好JDK，如果还没有装，推荐用yum一键安装</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  java-1.8.0-openjdk.x86_64</span></span></code></pre></div><p>检验：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@localhost </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# java -version</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openjdk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> version</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;1.8.0_362&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OpenJDK</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Runtime</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (build </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1.8.0_362-b08</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OpenJDK</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 64-Bit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> VM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (build </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">25.362-b08,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mixed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>3、将kafka压缩包上传到你的Linux</p><p>配置文件关注<code>config</code>目录下的<code>zookeeper.properties</code>和<code>server.properties</code>，启动服务时要指定</p><h3 id="配置-启动" tabindex="-1">配置-启动 <a class="header-anchor" href="#配置-启动" aria-label="Permalink to “配置-启动”">​</a></h3><p>有默认配置，可不做修改（有需要可以自定义启动端口和数据存放位置等参数）</p><p>1、先启动自带的 Zookeeper：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@localhost bin]# ./zookeeper-server-start.sh ../config/zookeeper.properties </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OpenJDK</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 64-Bit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> VM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> warning:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> If</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> number</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> processors</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> expected</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> increase</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> one,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> then</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> you</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> should</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> configure</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> number</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> parallel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GC</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> threads</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> appropriately</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> using</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -XX:ParallelGCThreads=N</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[2023-02-26 14:14:52,759] INFO Reading configuration from: ../config/zookeeper.properties (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">org.apache.zookeeper.server.quorum.QuorumPeerConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[2023-02-26 14:14:52,766] INFO autopurge.snapRetainCount set to 3 (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">org.apache.zookeeper.server.DatadirCleanupManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[2023-02-26 14:14:52,767] INFO autopurge.purgeInterval set to 0 (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">org.apache.zookeeper.server.DatadirCleanupManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[2023-02-26 14:14:52,767] INFO Purge task is not scheduled. (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">org.apache.zookeeper.server.DatadirCleanupManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[2023-02-26 14:14:52,767] WARN Either no config or no quorum defined in config, running  in standalone mode (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">org.apache.zookeeper.server.quorum.QuorumPeerMain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[2023-02-26 14:14:52,783] INFO Reading configuration from: ../config/zookeeper.properties (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">org.apache.zookeeper.server.quorum.QuorumPeerConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[2023-02-26 14:14:52,784] INFO Starting server (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">org.apache.zookeeper.server.ZooKeeperServerMain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[2023-02-26 14:14:52,796] INFO Server environment:zookeeper.version</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">3.4.14-4c25d480e66aadd371de8bd2fd8da255ac140bcf,</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> built</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 03/06/2019</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 16:18</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GMT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (org.apache.zookeeper.server.ZooKeeperServer)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[2023-02-26 14:14:52,796] INFO Server environment:host.name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">localhost</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> (org.apache.zookeeper.server.ZooKeeperServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[2023-02-26 14:14:52,796] INFO Server environment:java.version</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1.8.0_362</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> (org.apache.zookeeper.server.ZooKeeperServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[2023-02-26 14:14:52,796] INFO Server environment:java.vendor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Red</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Hat,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Inc.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (org.apache.zookeeper.server.ZooKeeperServer)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[2023-02-26 14:14:52,796] INFO Server environment:java.home</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.362.b08-1.el7_9.x86_64/jre</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> (org.apache.zookeeper.server.ZooKeeperServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">省略大部分</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>2、启动 Kafka</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@localhost kafka_2.12-2.3.0]# bin/kafka-server-start.sh config/server.properties </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OpenJDK</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 64-Bit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> VM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> warning:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> If</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> number</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> processors</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> expected</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> increase</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> one,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> then</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> you</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> should</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> configure</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> number</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> parallel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GC</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> threads</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> appropriately</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> using</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -XX:ParallelGCThreads=N</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[2023-02-26 14:16:00,261] INFO Registered kafka:type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">kafka.Log4jController</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MBean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (kafka.utils.Log4jControllerRegistration$)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[2023-02-26 14:16:01,004] INFO Registered signal handlers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TERM, INT, HUP (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">org.apache.kafka.common.utils.LoggingSignalHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[2023-02-26 14:16:01,024] INFO starting (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kafka.server.KafkaServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[2023-02-26 14:16:01,025] INFO Connecting to zookeeper on localhost:2181 (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kafka.server.KafkaServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[2023-02-26 14:16:01,068] INFO [ZooKeeperClient Kafka server] Initializing a new session to localhost:2181. (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kafka.zookeeper.ZooKeeperClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[2023-02-26 14:16:01,072] INFO Client environment:zookeeper.version</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">3.4.14-4c25d480e66aadd371de8bd2fd8da255ac140bcf,</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> built</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 03/06/2019</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 16:18</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GMT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (org.apache.zookeeper.ZooKeeper)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[2023-02-26 14:16:01,072] INFO Client environment:host.name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">localhost</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> (org.apache.zookeeper.ZooKeeper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[2023-02-26 14:16:01,072] INFO Client environment:java.version</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1.8.0_362</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> (org.apache.zookeeper.ZooKeeper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[2023-02-26 14:16:01,072] INFO Client environment:java.vendor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Red</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Hat,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Inc.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (org.apache.zookeeper.ZooKeeper)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[2023-02-26 14:16:01,072] INFO Client environment:java.home</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.362.b08-1.el7_9.x86_64/jre</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> (org.apache.zookeeper.ZooKeeper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">省略大部分</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><blockquote><p>上述步骤只要启动过程没有报错信息，一般是没有问题的</p></blockquote><h3 id="测试" tabindex="-1">测试 <a class="header-anchor" href="#测试" aria-label="Permalink to “测试”">​</a></h3><p>1、创建个topic</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@localhost bin]# ./kafka-topics.sh --create --zookeeper 192.168.154.134:2181 --replication-factor 1 --partitions 1 --topic test</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Created</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> topic</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test.</span></span></code></pre></div><p>2、查看topic列表</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@localhost bin]# ./kafka-topics.sh --zookeeper 192.168.154.134:2181 --list</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OpenJDK</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 64-Bit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> VM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> warning:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> If</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> number</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> processors</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> expected</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> increase</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> one,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> then</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> you</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> should</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> configure</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> number</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> parallel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GC</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> threads</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> appropriately</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> using</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -XX:ParallelGCThreads=N</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">test</span></span></code></pre></div><p>3、启动生产者</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@localhost bin]# ./kafka-console-producer.sh --broker-list 192.168.154.134:9092 --topic test</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">hi</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">什么意思啊</span></span></code></pre></div><p>4、启动消费者</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@localhost bin]# ./kafka-console-consumer.sh --bootstrap-server 192.168.154.134:9092 --topic test</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hi</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">什么意思啊</span></span></code></pre></div><blockquote><p>正常启动，OK！</p></blockquote><h2 id="可视化-kafka-manager" tabindex="-1">可视化：kafka-manager <a class="header-anchor" href="#可视化-kafka-manager" aria-label="Permalink to “可视化：kafka-manager”">​</a></h2><h3 id="镜像下载" tabindex="-1">镜像下载 <a class="header-anchor" href="#镜像下载" aria-label="Permalink to “镜像下载”">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sheepkiller/kafka-manager</span></span></code></pre></div><h3 id="运行容器" tabindex="-1">运行容器 <a class="header-anchor" href="#运行容器" aria-label="Permalink to “运行容器”">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kafka-manager</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 12349:9000</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --link</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zookeeper</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --link</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kafka01</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --env</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ZK_HOSTS=zookeeper:2181</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sheepkiller/kafka-manager</span></span></code></pre></div><p>然后访问对应的<code>IP：端口</code>即可进入管理页面</p><blockquote><p>注意：<code>ZK_HOSTS</code> 后面在web页面上要用到！</p></blockquote><h3 id="管理界面" tabindex="-1">管理界面 <a class="header-anchor" href="#管理界面" aria-label="Permalink to “管理界面”">​</a></h3><p>进入主页面后，点击 <code>Add Cluster</code> 添加集群信息</p><p><img src="http://cdn.qiniu.liyansheng.top/typora/image-20220818233716973.png" alt="image-20220818233716973"></p><p>然后填写配置信息，主要填写集群名称，Zookeeper的Hosts，还有指定kafka版本（选个跟你所使用的kafka版本号最接近的就行），其他的一些配置按默认的就行。</p><p>当你正确连接上以后，就能看到你的集群啦，如：</p><p><img src="http://cdn.qiniu.liyansheng.top/typora/image-20220818235108897.png" alt="image-20220818235108897"></p><p><img src="http://cdn.qiniu.liyansheng.top/typora/image-20220818235134261.png" alt="image-20220818235134261"></p><p><strong>更多关于kafka可视化操作就由你慢慢探索吧！这里将你引进门！</strong></p><blockquote><p>注意：</p><ol><li><p>如果你在启动<code>kafka manager</code>这个容器时指定了 <code>ZK_HOSTS</code> ，那么<strong>Cluster Zookeeper Hosts</strong>这项填的内容要和 <code>ZK_HOSTS</code> 一致，否则会出现连接不上，连接超时等情况。如下图：</p><p><img src="http://cdn.qiniu.liyansheng.top/typora/image-20220818234605319.png" alt="image-20220818234605319"></p></li><li><p>另外有些配置默认值是1，但是你得将其改成1以上的整数，否则不能正确保存提交。如：</p><p><img src="http://cdn.qiniu.liyansheng.top/typora/image-20220818234844587.png" alt="image-20220818234844587"></p></li></ol></blockquote><hr><h2 id="注意" tabindex="-1">注意 <a class="header-anchor" href="#注意" aria-label="Permalink to “注意”">​</a></h2><p>kafka版本不同，响应的api有区别</p><p>本版本是2.11</p><p>注意3.x是 --bootstrap-server localhost:9092方式新建，kafka2.x是以--zookeeper方式创建。下面查看新建的topic。</p><p><img src="http://cdn.qiniu.liyansheng.top/typora/image-20220925165659756.png" alt="image-20220925165659756"></p><p><img src="http://cdn.qiniu.liyansheng.top/typora/image-20220925165713665.png" alt="image-20220925165713665"></p><h2 id="奇葩问题" tabindex="-1">奇葩问题 <a class="header-anchor" href="#奇葩问题" aria-label="Permalink to “奇葩问题”">​</a></h2><h3 id="_1-重启docker失败" tabindex="-1">1.重启docker失败？ <a class="header-anchor" href="#_1-重启docker失败" aria-label="Permalink to “1.重启docker失败？”">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@localhost </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# systemctl restart docker</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Job</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker.service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> failed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> because</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> control</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> process</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exited</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> with</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> error</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> code.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> See</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;systemctl status docker.service&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;journalctl -xe&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> details.</span></span></code></pre></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@localhost </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# journalctl -xe</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> The</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> result</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> failed.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2月</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 02:01:53</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localhost.localdomain</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemd[1]:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Unit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker.service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> entered</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> failed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> state.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2月</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 02:01:53</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localhost.localdomain</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemd[1]:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Unit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker.service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> entered</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> failed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> state.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2月</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 02:01:53</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localhost.localdomain</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemd[1]:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker.service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> failed.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2月</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 02:01:55</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localhost.localdomain</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemd[1]:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker.service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> holdoff</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> time</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> over,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scheduling</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2月</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 02:01:55</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localhost.localdomain</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemd[1]:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Stopped</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Application</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Container</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Engine.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Subject:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Unit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker.service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> has</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> finished</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shutting</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> down</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Defined-By:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Support:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://lists.freedesktop.org/mailman/listinfo/systemd-devel</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Unit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker.service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> has</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> finished</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shutting</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> down.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2月</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 02:01:55</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localhost.localdomain</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemd[1]:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> request</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> repeated</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> too</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> quickly</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker.service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2月</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 02:01:55</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localhost.localdomain</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemd[1]:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Failed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Application</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Container</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Engine.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Subject:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Unit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker.service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> has</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> failed</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Defined-By:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Support:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://lists.freedesktop.org/mailman/listinfo/systemd-devel</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Unit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker.service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> has</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> failed.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> The</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> result</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> failed.</span></span></code></pre></div><p>原因：修改文件<code>/etc/docker/daemon.json</code>时不规范，可能存在空格什么的</p><p>解决：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@localhost </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# cat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/etc/docker/daemon.json</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&gt; &quot;registry-mirrors&quot;: [&quot;https://registry.docker-cn.com&quot;]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&gt; }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&gt; EOF</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[root@localhost ~]# cat /etc/docker/daemon.json </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;registry-mirrors&quot;: [&quot;https://registry.docker-cn.com&quot;]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[root@localhost ~]# </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[root@localhost ~]# systemctl daemon-reload</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[root@localhost ~]# systemctl restart docker</span></span></code></pre></div><h3 id="_2-查询镜像无果" tabindex="-1">2.查询镜像无果？ <a class="header-anchor" href="#_2-查询镜像无果" aria-label="Permalink to “2.查询镜像无果？”">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@localhost </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# docker search kafka</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Error</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> response</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> daemon:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;https://index.docker.io/v1/search?q=kafka&amp;n=25&quot;:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> x509:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> certificate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> has</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> expired</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> or</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yet</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> valid:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> current</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> time</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2023-02-22T02:08:25+08:00</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> before</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2023-02-22T00:00:00Z</span></span></code></pre></div><p>原因：虚拟机时间与外部时间不一致</p><p>解决：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@localhost </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# date</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2023年</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 02月</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 22日</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 星期三</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 02:09:50</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CST</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@localhost </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# ntpdate cn.pool.ntp.org</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">26</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Feb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 13:31:38</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ntpdate[44996]:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> step</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> time</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> server</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 119.28.206.193</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> offset</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 386475.634457</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sec</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@localhost </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# date</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2023年</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 02月</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 26日</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 星期日</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 13:31:48</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CST</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@localhost </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# docker search kafka</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                         DESCRIPTION</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                     STARS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     OFFICIAL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   AUTOMATED</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bitnami/kafka</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                Apache</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Kafka</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> distributed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> streaming</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> plat…</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   615</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                  [OK]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ubuntu/kafka</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                 Apache</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Kafka,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> distributed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> event</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> streaming</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> …</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   25</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                   </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bitnami/kafka-exporter</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                                                                       9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ibmcom/kafka</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                 Docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Image</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> IBM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Cloud</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Private-CE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Commu…   </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bitnami/kafka-trigger-controller</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">             Source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> this</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> controller</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kubeles…</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ibmcom/kafka-python-console-sample</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">           Docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> image</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> IBM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Event</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Streams</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Pytho…</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openwhisk/kafkaprovider</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                      Apache</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> OpenWhisk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> event</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> provider</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> …</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    [OK]</span></span></code></pre></div><h3 id="_3-docker容器内如何安装vim" tabindex="-1">3.Docker容器内如何安装vim? <a class="header-anchor" href="#_3-docker容器内如何安装vim" aria-label="Permalink to “3.Docker容器内如何安装vim?”">​</a></h3><ol><li><p>apt-get install vim （可能提示你安装失败！继续往下）</p></li><li><p>agt-get update 同步 /etc/apt/sources.list 和 /etc/apt/sources.list.d 中列出的源的索引</p><p>配置国内镜像源：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;deb http://mirrors.163.com/debian/ jessie main non-free contrib&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/etc/apt/sources.list</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;deb http://mirrors.163.com/debian/ jessie-proposed-updates main non-free contrib&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/etc/apt/sources.list</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;deb-src http://mirrors.163.com/debian/ jessie main non-free contrib&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/etc/apt/sources.list</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;deb-src http://mirrors.163.com/debian/ jessie-proposed-updates main non-free contrib&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/etc/apt/sources.list</span></span></code></pre></div></li><li><p>返回第一步</p></li></ol><h3 id="_4-无法启动kafka" tabindex="-1">4.无法启动kafka? <a class="header-anchor" href="#_4-无法启动kafka" aria-label="Permalink to “4.无法启动kafka?”">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kafka.common.KafkaException:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Socket</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> failed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bind</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 150.158.16.123:9092:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 无法指定被请求的地址.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kafka.network.Acceptor.openServerSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SocketServer.scala:327</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kafka.network.Acceptor.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ini</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&gt;(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SocketServer.scala:252</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kafka.network.SocketServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$$anonfun$startup</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">$1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SocketServer.scala:91</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kafka.network.SocketServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$$anonfun$startup</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">$1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SocketServer.scala:83</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scala.collection.mutable.ResizableArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$class</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.foreach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ResizableArray.scala:59</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scala.collection.mutable.ArrayBuffer.foreach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ArrayBuffer.scala:48</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kafka.network.SocketServer.startup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SocketServer.scala:83</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kafka.server.KafkaServer.startup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">KafkaServer.scala:222</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kafka.server.KafkaServerStartable.startup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">KafkaServerStartable.scala:38</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kafka.Kafka</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Kafka.scala:65</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kafka.Kafka.main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Kafka.scala</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>注意，上面是配置里面有个地址写得不对，listeners=PLAINTEXT://10.20.30.153:9092后接的是内网地址，通过ip addr即可查看，如我的机器</p><p><img src="http://cdn.qiniu.liyansheng.top/typora/image-20221001140813960.png" alt="image-20221001140813960"></p><p>一个写内网地址，一个写外网地址</p><p><img src="http://cdn.qiniu.liyansheng.top/typora/image-20221001140917719.png" alt="image-20221001140917719"></p>`,86)])])}const E=i(n,[["render",l]]);export{g as __pageData,E as default};
