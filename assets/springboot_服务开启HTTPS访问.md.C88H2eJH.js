import{_ as i,c as a,o as e,aj as t}from"./chunks/framework.VtnL2jmu.js";const c=JSON.parse('{"title":"开启HTTPS访问","description":"","frontmatter":{},"headers":[],"relativePath":"springboot/服务开启HTTPS访问.md","filePath":"springboot/服务开启HTTPS访问.md"}'),p={name:"springboot/服务开启HTTPS访问.md"};function l(n,s,h,o,r,k){return e(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="开启https访问" tabindex="-1">开启HTTPS访问 <a class="header-anchor" href="#开启https访问" aria-label="Permalink to “开启HTTPS访问”">​</a></h1><blockquote><p>申请了正规厂商颁发的域名证书后，可以按照以下步骤将其下载并配置到 Spring Boot 服务中。</p></blockquote><h3 id="_1-下载证书文件" tabindex="-1">1. 下载证书文件 <a class="header-anchor" href="#_1-下载证书文件" aria-label="Permalink to “1. 下载证书文件”">​</a></h3><p>证书颁发机构（CA）通常提供以下文件：</p><ul><li><strong>证书文件</strong>（一般为 <code>.crt</code> 或 <code>.cer</code> 格式）</li><li><strong>私钥文件</strong>（<code>.key</code> 格式）</li><li><strong>证书链文件</strong>（可能包含 CA 的中间证书，<code>.crt</code> 文件）</li></ul><p><img src="http://cdn.qiniu.liyansheng.top/img/image-20241107015852182.png" alt="image-20241107015852182"></p><p>下载后，将证书文件和私钥文件保存在本地的安全位置。</p><blockquote><p>注意：Spring Boot，直接支持的证书格式是 <code>PKCS12</code>（即 <code>.p12</code> 或 <code>.pfx</code> 文件）和 <code>JKS</code> 格式。</p></blockquote><h3 id="_2-将证书转换为-p12-或-jks-格式" tabindex="-1">2. 将证书转换为 <code>.p12</code> 或 <code>.jks</code> 格式 <a class="header-anchor" href="#_2-将证书转换为-p12-或-jks-格式" aria-label="Permalink to “2. 将证书转换为 .p12 或 .jks 格式”">​</a></h3><p>Spring Boot 使用 <code>PKCS12</code> (<code>.p12</code>) 或 <code>JKS</code> (<code>.jks</code>) 格式的密钥库文件，若证书是 <code>.crt</code> 和 <code>.key</code> 文件格式，可以使用 OpenSSL 将其转换为 <code>.p12</code> 文件。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pkcs12</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -export</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> your_certificate.crt</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -inkey</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> your_private.key</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> keystore.p12</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myalias</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -CAfile</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ca_bundle.crt</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -caname</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span></span></code></pre></div><p>解释：</p><ul><li><code>-in</code>：你的域名证书文件</li><li><code>-inkey</code>：私钥文件</li><li><code>-out</code>：生成的 <code>.p12</code> 文件名</li><li><code>-name</code>：证书的别名</li><li><code>-CAfile</code>：CA 提供的证书链文件</li><li><code>-caname</code>：根证书的名称</li></ul><p>运行该命令后，系统会提示你输入一个密码。记住该密码，稍后需要用到。</p><h3 id="_3-配置-spring-boot" tabindex="-1">3. 配置 Spring Boot <a class="header-anchor" href="#_3-配置-spring-boot" aria-label="Permalink to “3. 配置 Spring Boot”">​</a></h3><p>将生成的 <code>.p12</code> 文件放置到 Spring Boot 项目中（例如 <code>src/main/resources</code> 目录），然后在 <code>application.yml</code> 或 <code>application.properties</code> 中配置 HTTPS：</p><h4 id="在-application-yml-中配置" tabindex="-1">在 <code>application.yml</code> 中配置 <a class="header-anchor" href="#在-application-yml-中配置" aria-label="Permalink to “在 application.yml 中配置”">​</a></h4><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  ssl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    key-store</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">classpath:keystore.p12</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 密钥库路径</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    key-store-password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;your_password&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 转换时设置的密码</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    key-store-type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">PKCS12</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 指定密钥库类型</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    key-alias</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;myalias&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 转换时设置的别名</span></span></code></pre></div><blockquote><p>上面这个“别名”可以不写。</p></blockquote><h4 id="在-application-properties-中配置" tabindex="-1">在 <code>application.properties</code> 中配置 <a class="header-anchor" href="#在-application-properties-中配置" aria-label="Permalink to “在 application.properties 中配置”">​</a></h4><div class="language-properties"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">server.port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=8443</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">server.ssl.key-store</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=classpath:keystore.p12</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">server.ssl.key-store-password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=your_password</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">server.ssl.key-store-type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=PKCS12</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">server.ssl.key-alias</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=myalias</span></span></code></pre></div><h3 id="_4-启动-spring-boot-应用" tabindex="-1">4. 启动 Spring Boot 应用 <a class="header-anchor" href="#_4-启动-spring-boot-应用" aria-label="Permalink to “4. 启动 Spring Boot 应用”">​</a></h3><p>配置完成后，启动 Spring Boot 应用。现在可以通过 <code>https://your-domain.com:端口号</code> 访问服务。</p><p>这样，你的 Spring Boot 服务就可以安全地通过 HTTPS 提供服务了！</p>`,24)])])}const g=i(p,[["render",l]]);export{c as __pageData,g as default};
